<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Kactus2: D:/user/kamppia/SVNwork/Kactus2 SourceForge/LibraryManager/HierarchyView/hierarchyfilter.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>D:/user/kamppia/SVNwork/Kactus2 SourceForge/LibraryManager/HierarchyView/hierarchyfilter.cpp</h1><a href="hierarchyfilter_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* </span>
<a name="l00002"></a>00002 <span class="comment"> *      Created on: 1.7.2011</span>
<a name="l00003"></a>00003 <span class="comment"> *      Author: Antti Kamppi</span>
<a name="l00004"></a>00004 <span class="comment"> *              filename: hierarchyfilter.cpp</span>
<a name="l00005"></a>00005 <span class="comment"> *              Project: Kactus 2</span>
<a name="l00006"></a>00006 <span class="comment"> */</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="preprocessor">#include "<a class="code" href="hierarchyfilter_8h.html">hierarchyfilter.h</a>"</span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;<a class="code" href="_kactus_attribute_8h.html">common/KactusAttribute.h</a>&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;<a class="code" href="vlnvdialer_8h.html">LibraryManager/VLNVDialer/vlnvdialer.h</a>&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include "<a class="code" href="hierarchyitem_8h.html">hierarchyitem.h</a>"</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;QRegExp&gt;</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;QDebug&gt;</span>
<a name="l00017"></a>00017 
<a name="l00018"></a><a class="code" href="class_hierarchy_filter.html#5391438f84accc54cb2fa78a95fdddb3">00018</a> <a class="code" href="class_hierarchy_filter.html#5391438f84accc54cb2fa78a95fdddb3" title="The constructor.">HierarchyFilter::HierarchyFilter</a>(<a class="code" href="class_v_l_n_v_dialer.html" title="VLNVDialer is used to set options that specify what objects to display in library...">VLNVDialer</a>* dialer,
<a name="l00019"></a>00019                                                                  QObject *parent):
<a name="l00020"></a>00020 QSortFilterProxyModel(parent),
<a name="l00021"></a>00021 dialer_(dialer),
<a name="l00022"></a>00022 firmness_(),
<a name="l00023"></a>00023 implementation_(),
<a name="l00024"></a>00024 type_(),
<a name="l00025"></a>00025 hierarchy_(),
<a name="l00026"></a>00026 vendorValidator_(this),
<a name="l00027"></a>00027 libraryValidator_(this),
<a name="l00028"></a>00028 nameValidator_(this),
<a name="l00029"></a>00029 versionValidator_(this),
<a name="l00030"></a>00030 vendor_(),
<a name="l00031"></a>00031 library_(),
<a name="l00032"></a>00032 name_(),
<a name="l00033"></a>00033 version_() {
<a name="l00034"></a>00034 
<a name="l00035"></a>00035         Q_ASSERT(dialer);
<a name="l00036"></a>00036 
<a name="l00037"></a>00037         <span class="comment">// set settings for filter</span>
<a name="l00038"></a>00038         setSortLocaleAware(<span class="keyword">true</span>);
<a name="l00039"></a>00039         setSortCaseSensitivity(Qt::CaseInsensitive);
<a name="l00040"></a>00040 
<a name="l00041"></a>00041         QRegExp regExp(QString(<span class="stringliteral">"*"</span>), Qt::CaseInsensitive, QRegExp::Wildcard);
<a name="l00042"></a>00042         <a class="code" href="class_hierarchy_filter.html#3d43cb6515c1ef063b749615a8f6f688" title="The validator that checks vendor rules.">vendorValidator_</a>.setRegExp(regExp);
<a name="l00043"></a>00043         <a class="code" href="class_hierarchy_filter.html#46d74e5be4cdd659c46e34ee22e8d99a" title="The validator that checks library rules.">libraryValidator_</a>.setRegExp(regExp);
<a name="l00044"></a>00044         <a class="code" href="class_hierarchy_filter.html#6a05d25ed77b14ee2da658f47cc80e31" title="The validator that checks name rules.">nameValidator_</a>.setRegExp(regExp);
<a name="l00045"></a>00045         <a class="code" href="class_hierarchy_filter.html#73a4b56745f7e9c1183cc021ad1e9369" title="The validator that checks version rules.">versionValidator_</a>.setRegExp(regExp);
<a name="l00046"></a>00046 
<a name="l00047"></a>00047         connect(dialer, SIGNAL(vendorChanged(<span class="keyword">const</span> QString&amp;)),
<a name="l00048"></a>00048                 <span class="keyword">this</span>, SLOT(<a class="code" href="class_hierarchy_filter.html#b0ca15d508b644986add1cdb48ac79f2" title="Handler for when the text in vendor combobox is changed.">onVendorChanged</a>(<span class="keyword">const</span> QString&amp;)), Qt::UniqueConnection);
<a name="l00049"></a>00049         connect(dialer, SIGNAL(libraryChanged(<span class="keyword">const</span> QString&amp;)),
<a name="l00050"></a>00050                 <span class="keyword">this</span>, SLOT(<a class="code" href="class_hierarchy_filter.html#ff42960d60dafe798e4b837038e1300e" title="Handler for when the text in library combobox is changed.">onLibraryChanged</a>(<span class="keyword">const</span> QString&amp;)), Qt::UniqueConnection);
<a name="l00051"></a>00051         connect(dialer, SIGNAL(nameChanged(<span class="keyword">const</span> QString&amp;)), 
<a name="l00052"></a>00052                 <span class="keyword">this</span>, SLOT(<a class="code" href="class_hierarchy_filter.html#b2c26872b60d4c4bce8eab03eaed941d" title="Handler for when the text in name combobox is changed.">onNameChanged</a>(<span class="keyword">const</span> QString&amp;)), Qt::UniqueConnection);
<a name="l00053"></a>00053         connect(dialer, SIGNAL(versionChanged(<span class="keyword">const</span> QString&amp;)),
<a name="l00054"></a>00054                 <span class="keyword">this</span>, SLOT(<a class="code" href="class_hierarchy_filter.html#9e7663c739da56f2738d740116da9a5c" title="Handler for when the text in version combobox is changed.">onVersionChanged</a>(<span class="keyword">const</span> QString&amp;)), Qt::UniqueConnection);
<a name="l00055"></a>00055         connect(dialer, SIGNAL(firmnessChanged(<span class="keyword">const</span> <a class="code" href="struct_utils_1_1_firmness_options.html" title="Contains the Re-usability search filters.">Utils::FirmnessOptions</a>&amp;)),
<a name="l00056"></a>00056                 <span class="keyword">this</span>, SLOT(<a class="code" href="class_hierarchy_filter.html#081928d887fabdd093375790c679e0f3" title="Handler for when firmness options change.">onFirmnessChanged</a>(<span class="keyword">const</span> <a class="code" href="struct_utils_1_1_firmness_options.html" title="Contains the Re-usability search filters.">Utils::FirmnessOptions</a>&amp;)), Qt::UniqueConnection);
<a name="l00057"></a>00057         connect(dialer, SIGNAL(implementationChanged(<span class="keyword">const</span> <a class="code" href="struct_utils_1_1_implementation_options.html" title="Contains firmness search settings.">Utils::ImplementationOptions</a>&amp;)),
<a name="l00058"></a>00058                 <span class="keyword">this</span>, SLOT(<a class="code" href="class_hierarchy_filter.html#4462b5291a0a28892845a4af3460e81e" title="Handler for when implementation options change.">onImplementationChanged</a>(<span class="keyword">const</span> <a class="code" href="struct_utils_1_1_implementation_options.html" title="Contains firmness search settings.">Utils::ImplementationOptions</a>&amp;)), Qt::UniqueConnection);
<a name="l00059"></a>00059         connect(dialer, SIGNAL(typeChanged(<span class="keyword">const</span> <a class="code" href="struct_utils_1_1_type_options.html" title="Contains the search options for document types.">Utils::TypeOptions</a>&amp;)),
<a name="l00060"></a>00060                 <span class="keyword">this</span>, SLOT(<a class="code" href="class_hierarchy_filter.html#f5a70f85e16cc07634bd0260429342f9" title="Handler for when type options change.">onTypeChanged</a>(<span class="keyword">const</span> <a class="code" href="struct_utils_1_1_type_options.html" title="Contains the search options for document types.">Utils::TypeOptions</a>&amp;)), Qt::UniqueConnection);
<a name="l00061"></a>00061         connect(dialer, SIGNAL(hierarchyChanged(<span class="keyword">const</span> <a class="code" href="struct_utils_1_1_hierarchy_options.html" title="Contains the search settings for hierarchy.">Utils::HierarchyOptions</a>&amp;)),
<a name="l00062"></a>00062                 <span class="keyword">this</span>, SLOT(<a class="code" href="class_hierarchy_filter.html#9eb843ad87c2b96af629e275448ad098" title="Handler for when hierarchy options change.">onHierarchyChanged</a>(<span class="keyword">const</span> <a class="code" href="struct_utils_1_1_hierarchy_options.html" title="Contains the search settings for hierarchy.">Utils::HierarchyOptions</a>&amp;)), Qt::UniqueConnection);
<a name="l00063"></a>00063 }
<a name="l00064"></a>00064 
<a name="l00065"></a><a class="code" href="class_hierarchy_filter.html#c69ef7963617fa6af82bdd748c149772">00065</a> <a class="code" href="class_hierarchy_filter.html#c69ef7963617fa6af82bdd748c149772" title="The destructor.">HierarchyFilter::~HierarchyFilter</a>() {
<a name="l00066"></a>00066 }
<a name="l00067"></a>00067 
<a name="l00068"></a><a class="code" href="class_hierarchy_filter.html#b0ca15d508b644986add1cdb48ac79f2">00068</a> <span class="keywordtype">void</span> <a class="code" href="class_hierarchy_filter.html#b0ca15d508b644986add1cdb48ac79f2" title="Handler for when the text in vendor combobox is changed.">HierarchyFilter::onVendorChanged</a>( <span class="keyword">const</span> QString&amp; vendorText ) {
<a name="l00069"></a>00069         <a class="code" href="class_hierarchy_filter.html#f381aea556309c19e45282ebc0acc805" title="Contains filters for vendor.">vendor_</a> = vendorText;
<a name="l00070"></a>00070 
<a name="l00071"></a>00071         <span class="comment">// update the reg exp for validator</span>
<a name="l00072"></a>00072         QRegExp regExp(vendorText, Qt::CaseInsensitive, QRegExp::Wildcard);
<a name="l00073"></a>00073         <a class="code" href="class_hierarchy_filter.html#3d43cb6515c1ef063b749615a8f6f688" title="The validator that checks vendor rules.">vendorValidator_</a>.setRegExp(regExp);
<a name="l00074"></a>00074 
<a name="l00075"></a>00075         invalidateFilter();
<a name="l00076"></a>00076 }
<a name="l00077"></a>00077 
<a name="l00078"></a><a class="code" href="class_hierarchy_filter.html#ff42960d60dafe798e4b837038e1300e">00078</a> <span class="keywordtype">void</span> <a class="code" href="class_hierarchy_filter.html#ff42960d60dafe798e4b837038e1300e" title="Handler for when the text in library combobox is changed.">HierarchyFilter::onLibraryChanged</a>( <span class="keyword">const</span> QString&amp; libraryText ) {
<a name="l00079"></a>00079         <a class="code" href="class_hierarchy_filter.html#c64d29a0f87c24f05149fc78610fecc5" title="Contains filters for library.">library_</a> = libraryText;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081         <span class="comment">// update the reg exp for validator</span>
<a name="l00082"></a>00082         QRegExp regExp(libraryText, Qt::CaseInsensitive, QRegExp::Wildcard);
<a name="l00083"></a>00083         <a class="code" href="class_hierarchy_filter.html#46d74e5be4cdd659c46e34ee22e8d99a" title="The validator that checks library rules.">libraryValidator_</a>.setRegExp(regExp);
<a name="l00084"></a>00084 
<a name="l00085"></a>00085         invalidateFilter();
<a name="l00086"></a>00086 }
<a name="l00087"></a>00087 
<a name="l00088"></a><a class="code" href="class_hierarchy_filter.html#b2c26872b60d4c4bce8eab03eaed941d">00088</a> <span class="keywordtype">void</span> <a class="code" href="class_hierarchy_filter.html#b2c26872b60d4c4bce8eab03eaed941d" title="Handler for when the text in name combobox is changed.">HierarchyFilter::onNameChanged</a>( <span class="keyword">const</span> QString&amp; nameText ) {
<a name="l00089"></a>00089         <a class="code" href="class_hierarchy_filter.html#7e43b830637d6e5234aa72ce3530b7dc" title="Contains filters for name.">name_</a> = nameText;
<a name="l00090"></a>00090 
<a name="l00091"></a>00091         <span class="comment">// update the reg exp for validator</span>
<a name="l00092"></a>00092         QRegExp regExp(nameText, Qt::CaseInsensitive, QRegExp::Wildcard);
<a name="l00093"></a>00093         <a class="code" href="class_hierarchy_filter.html#6a05d25ed77b14ee2da658f47cc80e31" title="The validator that checks name rules.">nameValidator_</a>.setRegExp(regExp);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095         invalidateFilter();
<a name="l00096"></a>00096 }
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="class_hierarchy_filter.html#9e7663c739da56f2738d740116da9a5c">00098</a> <span class="keywordtype">void</span> <a class="code" href="class_hierarchy_filter.html#9e7663c739da56f2738d740116da9a5c" title="Handler for when the text in version combobox is changed.">HierarchyFilter::onVersionChanged</a>( <span class="keyword">const</span> QString&amp; versionText ) {
<a name="l00099"></a>00099         <a class="code" href="class_hierarchy_filter.html#727a67096d96f584a9a5ef95e69cbfcb" title="Contains filters for version.">version_</a> = versionText;
<a name="l00100"></a>00100 
<a name="l00101"></a>00101         <span class="comment">// update the reg exp for validator</span>
<a name="l00102"></a>00102         QRegExp regExp(versionText, Qt::CaseInsensitive, QRegExp::Wildcard);
<a name="l00103"></a>00103         <a class="code" href="class_hierarchy_filter.html#73a4b56745f7e9c1183cc021ad1e9369" title="The validator that checks version rules.">versionValidator_</a>.setRegExp(regExp);
<a name="l00104"></a>00104 
<a name="l00105"></a>00105         invalidateFilter();
<a name="l00106"></a>00106 }
<a name="l00107"></a>00107 
<a name="l00108"></a><a class="code" href="class_hierarchy_filter.html#081928d887fabdd093375790c679e0f3">00108</a> <span class="keywordtype">void</span> <a class="code" href="class_hierarchy_filter.html#081928d887fabdd093375790c679e0f3" title="Handler for when firmness options change.">HierarchyFilter::onFirmnessChanged</a>( <span class="keyword">const</span> <a class="code" href="struct_utils_1_1_firmness_options.html" title="Contains the Re-usability search filters.">Utils::FirmnessOptions</a>&amp; options ) {
<a name="l00109"></a>00109         <a class="code" href="class_hierarchy_filter.html#ea4abfbd6c58a634bf50be61f2309d32" title="Contains filters for re-usability.">firmness_</a> = options;
<a name="l00110"></a>00110         invalidateFilter();
<a name="l00111"></a>00111 }
<a name="l00112"></a>00112 
<a name="l00113"></a><a class="code" href="class_hierarchy_filter.html#4462b5291a0a28892845a4af3460e81e">00113</a> <span class="keywordtype">void</span> <a class="code" href="class_hierarchy_filter.html#4462b5291a0a28892845a4af3460e81e" title="Handler for when implementation options change.">HierarchyFilter::onImplementationChanged</a>( <span class="keyword">const</span> <a class="code" href="struct_utils_1_1_implementation_options.html" title="Contains firmness search settings.">Utils::ImplementationOptions</a>&amp; options ) {
<a name="l00114"></a>00114         <a class="code" href="class_hierarchy_filter.html#8ac41a068459db8423b37ad4a2d757ba" title="Contains filters for firmness.">implementation_</a> = options;
<a name="l00115"></a>00115         invalidateFilter();
<a name="l00116"></a>00116 }
<a name="l00117"></a>00117 
<a name="l00118"></a><a class="code" href="class_hierarchy_filter.html#f5a70f85e16cc07634bd0260429342f9">00118</a> <span class="keywordtype">void</span> <a class="code" href="class_hierarchy_filter.html#f5a70f85e16cc07634bd0260429342f9" title="Handler for when type options change.">HierarchyFilter::onTypeChanged</a>( <span class="keyword">const</span> <a class="code" href="struct_utils_1_1_type_options.html" title="Contains the search options for document types.">Utils::TypeOptions</a>&amp; options ) {
<a name="l00119"></a>00119         <a class="code" href="class_hierarchy_filter.html#d107880bf9d3d23bfd83cbe247555df9" title="Contains filters for type.">type_</a> = options;
<a name="l00120"></a>00120         invalidateFilter();
<a name="l00121"></a>00121 }
<a name="l00122"></a>00122 
<a name="l00123"></a><a class="code" href="class_hierarchy_filter.html#9eb843ad87c2b96af629e275448ad098">00123</a> <span class="keywordtype">void</span> <a class="code" href="class_hierarchy_filter.html#9eb843ad87c2b96af629e275448ad098" title="Handler for when hierarchy options change.">HierarchyFilter::onHierarchyChanged</a>( <span class="keyword">const</span> <a class="code" href="struct_utils_1_1_hierarchy_options.html" title="Contains the search settings for hierarchy.">Utils::HierarchyOptions</a>&amp; options ) {
<a name="l00124"></a>00124         <a class="code" href="class_hierarchy_filter.html#af381904eec6b298037622ae5c920f5e" title="Contains filters for hierarchy.">hierarchy_</a> = options;
<a name="l00125"></a>00125         invalidateFilter();
<a name="l00126"></a>00126 }
<a name="l00127"></a>00127 
<a name="l00128"></a><a class="code" href="class_hierarchy_filter.html#3f4572f4f072e7efc666f163e9cbf901">00128</a> <span class="keywordtype">bool</span> <a class="code" href="class_hierarchy_filter.html#3f4572f4f072e7efc666f163e9cbf901" title="Validate the given row on a parent and check if item should be shown.">HierarchyFilter::filterAcceptsRow</a>( <span class="keywordtype">int</span> source_row,
<a name="l00129"></a>00129                                                                            <span class="keyword">const</span> QModelIndex&amp; source_parent )<span class="keyword"> const </span>{
<a name="l00130"></a>00130 
<a name="l00131"></a>00131         <span class="comment">// find the hierarchy item</span>
<a name="l00132"></a>00132         QModelIndex itemIndex = sourceModel()-&gt;index(source_row, 0, source_parent);
<a name="l00133"></a>00133 
<a name="l00134"></a>00134         <span class="comment">// root item is always ok</span>
<a name="l00135"></a>00135         <span class="keywordflow">if</span> (!itemIndex.isValid())
<a name="l00136"></a>00136                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138         <a class="code" href="class_hierarchy_item.html" title="Represents a single component in the library in hierarchy view.">HierarchyItem</a>* item = <span class="keyword">static_cast&lt;</span><a class="code" href="class_hierarchy_item.html" title="Represents a single component in the library in hierarchy view.">HierarchyItem</a>*<span class="keyword">&gt;</span>(itemIndex.internalPointer());
<a name="l00139"></a>00139 
<a name="l00140"></a>00140         <span class="comment">// if no search rules for vlnv are defined then display only non-duplicate</span>
<a name="l00141"></a>00141         <span class="comment">// children of root</span>
<a name="l00142"></a>00142         <span class="keywordflow">if</span> (<a class="code" href="class_hierarchy_filter.html#f381aea556309c19e45282ebc0acc805" title="Contains filters for vendor.">vendor_</a>.size() &lt;= 1 &amp;&amp; <a class="code" href="class_hierarchy_filter.html#c64d29a0f87c24f05149fc78610fecc5" title="Contains filters for library.">library_</a>.size() &lt;= 1  &amp;&amp; <a class="code" href="class_hierarchy_filter.html#7e43b830637d6e5234aa72ce3530b7dc" title="Contains filters for name.">name_</a>.size() &lt;= 1 &amp;&amp;
<a name="l00143"></a>00143                 <a class="code" href="class_hierarchy_filter.html#727a67096d96f584a9a5ef95e69cbfcb" title="Contains filters for version.">version_</a>.size() &lt;= 1 &amp;&amp; item-&gt;<a class="code" href="class_hierarchy_item.html#57503fb5fe87750d6b168d6af52c0dbc" title="Check if the parent of this item is the root item.">parentIsRoot</a>() &amp;&amp; item-&gt;<a class="code" href="class_hierarchy_item.html#c20d499a4d700e4b0d4b6ae4b12049c3" title="Check if this item is instantated in some item or not.">isDuplicate</a>()) {
<a name="l00144"></a>00144                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00145"></a>00145         }
<a name="l00146"></a>00146 
<a name="l00147"></a>00147         <span class="comment">// check the type</span>
<a name="l00148"></a>00148         <span class="keywordflow">switch</span> (item-&gt;<a class="code" href="class_hierarchy_item.html#d071e94355ed53ff2f41579662ad059f" title="Get the type of this hierarchy item.">type</a>()) {
<a name="l00149"></a>00149                 <span class="keywordflow">case</span> <a class="code" href="class_hierarchy_item.html#02483ce71b8b19000e574754adcd79cecf1ff60833b01fa0685d40aa697ac5e7">HierarchyItem::COMPONENT</a>: {
<a name="l00150"></a>00150                         <span class="keywordflow">if</span> (!<a class="code" href="class_hierarchy_filter.html#d107880bf9d3d23bfd83cbe247555df9" title="Contains filters for type.">type_</a>.<a class="code" href="struct_utils_1_1_type_options.html#69ff767a92ddf0d4eeb38d62b823debe" title="If true then components should be included in search.">components_</a>)
<a name="l00151"></a>00151                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00152"></a>00152                         <span class="keywordflow">break</span>;
<a name="l00153"></a>00153                                                                            }
<a name="l00154"></a>00154                 <span class="keywordflow">case</span> <a class="code" href="class_hierarchy_item.html#02483ce71b8b19000e574754adcd79ce6bfd3b02fb15a57bf37caf7c0b7e8360">HierarchyItem::BUSDEFINITION</a>:
<a name="l00155"></a>00155                 <span class="keywordflow">case</span> <a class="code" href="class_hierarchy_item.html#02483ce71b8b19000e574754adcd79ce81d2887313b84af03a01382c092fc6f0">HierarchyItem::ABSDEFINITION</a>: {
<a name="l00156"></a>00156                         <span class="keywordflow">if</span> (!<a class="code" href="class_hierarchy_filter.html#d107880bf9d3d23bfd83cbe247555df9" title="Contains filters for type.">type_</a>.<a class="code" href="struct_utils_1_1_type_options.html#8eb44840598f86dfa1db377bbbaf323b" title="If true then bus definitions should be included in search.">buses_</a>)
<a name="l00157"></a>00157                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00158"></a>00158 
<a name="l00159"></a>00159                         <span class="keywordflow">switch</span> (item-&gt;<a class="code" href="class_hierarchy_item.html#cf1bf1e669275d955b05342dcd0c0d62" title="Get the type of the bus definition.">getBusDefType</a>()) 
<a name="l00160"></a>00160                         {
<a name="l00161"></a>00161                         <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#d0ad005d1d534814a479558606978b4c8afdf58deb1879a81dea92ed4a25970d">KactusAttribute::KTS_BUSDEF_HW</a>: 
<a name="l00162"></a>00162                                 {
<a name="l00163"></a>00163                                         <span class="comment">// if hw should not be displayed then this is not shown</span>
<a name="l00164"></a>00164                                         <span class="keywordflow">if</span> (!<a class="code" href="class_hierarchy_filter.html#8ac41a068459db8423b37ad4a2d757ba" title="Contains filters for firmness.">implementation_</a>.<a class="code" href="struct_utils_1_1_implementation_options.html#9631f5738e6db929cccf7483ab337ef3" title="If true then hardware components should be included in search.">hw_</a>)
<a name="l00165"></a>00165                                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00166"></a>00166                                         
<a name="l00167"></a>00167                                         <span class="comment">// otherwise continue to check the vlnv</span>
<a name="l00168"></a>00168                                         <span class="keywordflow">break</span>;
<a name="l00169"></a>00169                                 }
<a name="l00170"></a>00170                         <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#d0ad005d1d534814a479558606978b4cfb84f85dc05960833f03a04a11ec2279">KactusAttribute::KTS_BUSDEF_API</a>:
<a name="l00171"></a>00171                         <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#d0ad005d1d534814a479558606978b4cae381b14725bdeaa5a339afbe31a93e2">KactusAttribute::KTS_BUSDEF_MCAPI</a>: 
<a name="l00172"></a>00172                                 {
<a name="l00173"></a>00173                                         <span class="comment">// if sw should not be displayed then this is not shown</span>
<a name="l00174"></a>00174                                         <span class="keywordflow">if</span> (!<a class="code" href="class_hierarchy_filter.html#8ac41a068459db8423b37ad4a2d757ba" title="Contains filters for firmness.">implementation_</a>.<a class="code" href="struct_utils_1_1_implementation_options.html#9274700ac33024297e5c5712cb62ce0e" title="If true then software components should be included in search.">sw_</a>)
<a name="l00175"></a>00175                                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00176"></a>00176 
<a name="l00177"></a>00177                                         <span class="comment">// otherwise continue to check the vlnv</span>
<a name="l00178"></a>00178                                         <span class="keywordflow">break</span>;
<a name="l00179"></a>00179                                 }
<a name="l00180"></a>00180                         <span class="keywordflow">default</span>:
<a name="l00181"></a>00181                                 {
<a name="l00182"></a>00182                                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00183"></a>00183                                 }
<a name="l00184"></a>00184                         }
<a name="l00185"></a>00185                                                                                    }
<a name="l00186"></a>00186         }
<a name="l00187"></a>00187 
<a name="l00188"></a>00188         QSharedPointer&lt;Component&gt; component = item-&gt;<a class="code" href="class_hierarchy_item.html#cb3eede17edc02aa0b24671434131f08" title="Get pointer to the component that this item represents.">component</a>();
<a name="l00189"></a>00189 
<a name="l00190"></a>00190         QList&lt;VLNV&gt; list = item-&gt;<a class="code" href="class_hierarchy_item.html#688da081dbfdd6b7af691a1634f8ed29" title="Get the list of vlnvs this item and it&amp;#39;s parents contain.">getVLNVs</a>();
<a name="l00191"></a>00191 
<a name="l00192"></a>00192         <span class="keywordflow">if</span> (component) {
<a name="l00193"></a>00193                 <span class="comment">// check the filters</span>
<a name="l00194"></a>00194                 <span class="keywordflow">if</span> (!<a class="code" href="class_hierarchy_filter.html#6b41e4a34b31f8374f815f1dadf50b33" title="Check the firmness matching.">checkFirmness</a>(component))
<a name="l00195"></a>00195                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00196"></a>00196                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="class_hierarchy_filter.html#ccad8ebb18d5309bf913ec8ca0b0f5e6" title="Check the implementation matching.">checkImplementation</a>(component))
<a name="l00197"></a>00197                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00198"></a>00198                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="class_hierarchy_filter.html#94f04b23c8ebb655a3a77e22891f185e" title="Check the hierarchy matching.">checkHierarchy</a>(component))
<a name="l00199"></a>00199                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00200"></a>00200         }
<a name="l00201"></a>00201 
<a name="l00202"></a>00202         <span class="keywordflow">if</span> (!<a class="code" href="class_hierarchy_filter.html#85120c182454fc8fe244651296bbf89b" title="Check the list of vlnvs if they match the search rules.">checkVLNVs</a>(list))
<a name="l00203"></a>00203                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00204"></a>00204         <span class="keywordflow">else</span> 
<a name="l00205"></a>00205                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00206"></a>00206 }
<a name="l00207"></a>00207 
<a name="l00208"></a><a class="code" href="class_hierarchy_filter.html#85120c182454fc8fe244651296bbf89b">00208</a> <span class="keywordtype">bool</span> <a class="code" href="class_hierarchy_filter.html#85120c182454fc8fe244651296bbf89b" title="Check the list of vlnvs if they match the search rules.">HierarchyFilter::checkVLNVs</a>( <span class="keyword">const</span> QList&lt;VLNV&gt;&amp; list )<span class="keyword"> const </span>{
<a name="l00209"></a>00209 
<a name="l00210"></a>00210         <span class="keywordflow">foreach</span> (<a class="code" href="class_v_l_n_v.html" title="The class to hold VLNV information of a single IP-XACT document.">VLNV</a> vlnv, list) {
<a name="l00211"></a>00211 
<a name="l00212"></a>00212                 <span class="keywordtype">int</span> pos = 0;
<a name="l00213"></a>00213 
<a name="l00214"></a>00214                 <span class="comment">// QT library Forced to use temp variables</span>
<a name="l00215"></a>00215                 QString vendor = vlnv.<a class="code" href="class_v_l_n_v.html#8868ebe2affad578b9c9c3aef1f38632" title="Get the vendor of the VLNV.">getVendor</a>();
<a name="l00216"></a>00216                 QString library =  vlnv.<a class="code" href="class_v_l_n_v.html#f00f5007636620ffeff44521bacca857" title="Get the library of the VLNV.">getLibrary</a>();
<a name="l00217"></a>00217                 QString name =  vlnv.<a class="code" href="class_v_l_n_v.html#3ff2bdff884da48aa0e936fa5595b7e8" title="Get the name of the IP block in VLNV.">getName</a>();
<a name="l00218"></a>00218                 QString version =  vlnv.<a class="code" href="class_v_l_n_v.html#3a5da6ca75e9a6bf575906c2ea185051" title="Get the version of the VLNV.">getVersion</a>();
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 
<a name="l00221"></a>00221                 <span class="comment">// if the vlnv matches the search rules</span>
<a name="l00222"></a>00222                 <span class="keywordflow">if</span> ((<a class="code" href="class_hierarchy_filter.html#3d43cb6515c1ef063b749615a8f6f688" title="The validator that checks vendor rules.">vendorValidator_</a>.validate(vendor, pos) ==
<a name="l00223"></a>00223                         QValidator::Acceptable) &amp;&amp;
<a name="l00224"></a>00224                         (<a class="code" href="class_hierarchy_filter.html#46d74e5be4cdd659c46e34ee22e8d99a" title="The validator that checks library rules.">libraryValidator_</a>.validate(library, pos) ==
<a name="l00225"></a>00225                         QValidator::Acceptable) &amp;&amp;
<a name="l00226"></a>00226                         (<a class="code" href="class_hierarchy_filter.html#6a05d25ed77b14ee2da658f47cc80e31" title="The validator that checks name rules.">nameValidator_</a>.validate(name, pos) ==
<a name="l00227"></a>00227                         QValidator::Acceptable) &amp;&amp;
<a name="l00228"></a>00228                         (<a class="code" href="class_hierarchy_filter.html#73a4b56745f7e9c1183cc021ad1e9369" title="The validator that checks version rules.">versionValidator_</a>.validate(version, pos) ==
<a name="l00229"></a>00229                         QValidator::Acceptable)) {
<a name="l00230"></a>00230                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00231"></a>00231                         
<a name="l00232"></a>00232                 }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234         }
<a name="l00235"></a>00235 
<a name="l00236"></a>00236         <span class="comment">// if none of the vlnvs matched</span>
<a name="l00237"></a>00237         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00238"></a>00238 }
<a name="l00239"></a>00239 
<a name="l00240"></a><a class="code" href="class_hierarchy_filter.html#6b41e4a34b31f8374f815f1dadf50b33">00240</a> <span class="keywordtype">bool</span> <a class="code" href="class_hierarchy_filter.html#6b41e4a34b31f8374f815f1dadf50b33" title="Check the firmness matching.">HierarchyFilter::checkFirmness</a>(QSharedPointer&lt;Component&gt; component)<span class="keyword"> const </span>{
<a name="l00241"></a>00241         Q_ASSERT(component);
<a name="l00242"></a>00242 
<a name="l00243"></a>00243         <span class="keywordflow">switch</span> (component-&gt;getComponentFirmness()) {
<a name="l00244"></a>00244                 <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#7c11f424c8a71f41a6d90a2bc2ab444a022e3b156e47ff7c62609b0dab389067">KactusAttribute::KTS_TEMPLATE</a>: 
<a name="l00245"></a>00245                         <span class="keywordflow">return</span> <a class="code" href="class_hierarchy_filter.html#ea4abfbd6c58a634bf50be61f2309d32" title="Contains filters for re-usability.">firmness_</a>.<a class="code" href="struct_utils_1_1_firmness_options.html#b9fee823023b0ba3cb788b5e12f6f390" title="If true then templates should be included in search.">templates_</a>;
<a name="l00246"></a>00246                                                                                         
<a name="l00247"></a>00247                 <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#7c11f424c8a71f41a6d90a2bc2ab444aa294989ac6fe7678d720d6f00379cc3f">KactusAttribute::KTS_MUTABLE</a>: 
<a name="l00248"></a>00248                         <span class="keywordflow">return</span> <a class="code" href="class_hierarchy_filter.html#ea4abfbd6c58a634bf50be61f2309d32" title="Contains filters for re-usability.">firmness_</a>.<a class="code" href="struct_utils_1_1_firmness_options.html#82bfdc1416428f4fa868b843f79b9c80" title="If true then mutables should be included in search.">mutable_</a>;
<a name="l00249"></a>00249 
<a name="l00250"></a>00250                 <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#7c11f424c8a71f41a6d90a2bc2ab444ab048c26c92766efaf21fdf0047ec0f25">KactusAttribute::KTS_PARAMETERIZABLE</a>: 
<a name="l00251"></a>00251                         <span class="keywordflow">return</span> <a class="code" href="class_hierarchy_filter.html#ea4abfbd6c58a634bf50be61f2309d32" title="Contains filters for re-usability.">firmness_</a>.<a class="code" href="struct_utils_1_1_firmness_options.html#a01ab059d8c1cc05dc8b1a3fa38c1c1e" title="If true then parameterizables should be included in search.">parameterizable_</a>;
<a name="l00252"></a>00252 
<a name="l00253"></a>00253                 <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#7c11f424c8a71f41a6d90a2bc2ab444a5de1b82a1b9b3f3cfb9e11d72e6e8062">KactusAttribute::KTS_FIXED</a>: 
<a name="l00254"></a>00254                         <span class="keywordflow">return</span> <a class="code" href="class_hierarchy_filter.html#ea4abfbd6c58a634bf50be61f2309d32" title="Contains filters for re-usability.">firmness_</a>.<a class="code" href="struct_utils_1_1_firmness_options.html#c3476c66233d7ab085ae75df9dba6e58" title="If true then fixeds should be included in search.">fixed_</a>;
<a name="l00255"></a>00255 
<a name="l00256"></a>00256                 <span class="keywordflow">default</span>:
<a name="l00257"></a>00257                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00258"></a>00258         }
<a name="l00259"></a>00259 }
<a name="l00260"></a>00260 
<a name="l00261"></a><a class="code" href="class_hierarchy_filter.html#ccad8ebb18d5309bf913ec8ca0b0f5e6">00261</a> <span class="keywordtype">bool</span> <a class="code" href="class_hierarchy_filter.html#ccad8ebb18d5309bf913ec8ca0b0f5e6" title="Check the implementation matching.">HierarchyFilter::checkImplementation</a>(QSharedPointer&lt;Component&gt; component)<span class="keyword"> const </span>{
<a name="l00262"></a>00262         Q_ASSERT(component);
<a name="l00263"></a>00263 
<a name="l00264"></a>00264         <span class="keywordflow">switch</span> (component-&gt;getComponentImplementation()) {
<a name="l00265"></a>00265                 <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#4c6e0166aeee94fc12ab9c0c558eccddd0d2e6841871f7e234a5c9bb5513e0c7">KactusAttribute::KTS_HW</a>:
<a name="l00266"></a>00266                         <span class="keywordflow">return</span> <a class="code" href="class_hierarchy_filter.html#8ac41a068459db8423b37ad4a2d757ba" title="Contains filters for firmness.">implementation_</a>.<a class="code" href="struct_utils_1_1_implementation_options.html#9631f5738e6db929cccf7483ab337ef3" title="If true then hardware components should be included in search.">hw_</a>;
<a name="l00267"></a>00267 
<a name="l00268"></a>00268                 <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#4c6e0166aeee94fc12ab9c0c558eccdd23695ed8c3c3665f9f12f1db046e8ca3">KactusAttribute::KTS_SW</a>:
<a name="l00269"></a>00269                         <span class="keywordflow">return</span> <a class="code" href="class_hierarchy_filter.html#8ac41a068459db8423b37ad4a2d757ba" title="Contains filters for firmness.">implementation_</a>.<a class="code" href="struct_utils_1_1_implementation_options.html#9274700ac33024297e5c5712cb62ce0e" title="If true then software components should be included in search.">sw_</a>;
<a name="l00270"></a>00270 
<a name="l00271"></a>00271                 <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#4c6e0166aeee94fc12ab9c0c558eccdd5741fd346b410fa27658effe9a4c2a8b">KactusAttribute::KTS_SYS</a>:
<a name="l00272"></a>00272                         <span class="keywordflow">return</span> <a class="code" href="class_hierarchy_filter.html#8ac41a068459db8423b37ad4a2d757ba" title="Contains filters for firmness.">implementation_</a>.<a class="code" href="struct_utils_1_1_implementation_options.html#45b9662745b1c2a12ab21d58b25e4b07" title="If true then system components should be included in search.">system_</a>;
<a name="l00273"></a>00273 
<a name="l00274"></a>00274                 <span class="keywordflow">default</span>:
<a name="l00275"></a>00275                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00276"></a>00276         } 
<a name="l00277"></a>00277 }
<a name="l00278"></a>00278 
<a name="l00279"></a><a class="code" href="class_hierarchy_filter.html#94f04b23c8ebb655a3a77e22891f185e">00279</a> <span class="keywordtype">bool</span> <a class="code" href="class_hierarchy_filter.html#94f04b23c8ebb655a3a77e22891f185e" title="Check the hierarchy matching.">HierarchyFilter::checkHierarchy</a>(QSharedPointer&lt;Component&gt; component)<span class="keyword"> const </span>{
<a name="l00280"></a>00280         Q_ASSERT(component);
<a name="l00281"></a>00281 
<a name="l00282"></a>00282         <span class="keywordflow">switch</span> (component-&gt;getComponentHierarchy()) {
<a name="l00283"></a>00283                 <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#27f6fc35c32f76ebb60063fbda431f3e512bb026c2ba145701df73e467369df2">KactusAttribute::KTS_GLOBAL</a>:
<a name="l00284"></a>00284                         <span class="keywordflow">return</span> <a class="code" href="class_hierarchy_filter.html#af381904eec6b298037622ae5c920f5e" title="Contains filters for hierarchy.">hierarchy_</a>.<a class="code" href="struct_utils_1_1_hierarchy_options.html#efcd6359cb71ca2d81df34c1f60a5d7b" title="If true then global objects should be included in search.">global_</a>;
<a name="l00285"></a>00285 
<a name="l00286"></a>00286                 <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#27f6fc35c32f76ebb60063fbda431f3e2474ad21303f161b8afdc7339bef6150">KactusAttribute::KTS_PRODUCT</a>:
<a name="l00287"></a>00287                         <span class="keywordflow">return</span> <a class="code" href="class_hierarchy_filter.html#af381904eec6b298037622ae5c920f5e" title="Contains filters for hierarchy.">hierarchy_</a>.<a class="code" href="struct_utils_1_1_hierarchy_options.html#19f15cdd955a0579680fdcfdb0f7789c" title="If true then product objects should be included in search.">product_</a>;
<a name="l00288"></a>00288 
<a name="l00289"></a>00289                 <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#27f6fc35c32f76ebb60063fbda431f3e7d36b2a0d2340c211dfad5338fa6befb">KactusAttribute::KTS_BOARD</a>:
<a name="l00290"></a>00290                         <span class="keywordflow">return</span> <a class="code" href="class_hierarchy_filter.html#af381904eec6b298037622ae5c920f5e" title="Contains filters for hierarchy.">hierarchy_</a>.<a class="code" href="struct_utils_1_1_hierarchy_options.html#5f62a11a4bb65ca7acbe09d471c941b4" title="If true then board objects should be included in search.">board_</a>;
<a name="l00291"></a>00291 
<a name="l00292"></a>00292                 <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#27f6fc35c32f76ebb60063fbda431f3eaa7f62c02528df1a883a4f85fc72f1d0">KactusAttribute::KTS_CHIP</a>:
<a name="l00293"></a>00293                         <span class="keywordflow">return</span> <a class="code" href="class_hierarchy_filter.html#af381904eec6b298037622ae5c920f5e" title="Contains filters for hierarchy.">hierarchy_</a>.<a class="code" href="struct_utils_1_1_hierarchy_options.html#795074b5b7cbdf33a2957559302d07e2" title="If true then chip objects should be included in search.">chip_</a>;
<a name="l00294"></a>00294 
<a name="l00295"></a>00295                 <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#27f6fc35c32f76ebb60063fbda431f3eef434c386d7ce8de54fe167dd640ad6c">KactusAttribute::KTS_SOC</a>:
<a name="l00296"></a>00296                         <span class="keywordflow">return</span> <a class="code" href="class_hierarchy_filter.html#af381904eec6b298037622ae5c920f5e" title="Contains filters for hierarchy.">hierarchy_</a>.<a class="code" href="struct_utils_1_1_hierarchy_options.html#cedaec30cebf1918b5e2a8f149d8625f" title="If true then soc objects should be included in search.">soc_</a>;
<a name="l00297"></a>00297 
<a name="l00298"></a>00298                 <span class="keywordflow">case</span> <a class="code" href="namespace_kactus_attribute.html#27f6fc35c32f76ebb60063fbda431f3e913055a347f85fff1ddff0b92329272e">KactusAttribute::KTS_IP</a>:
<a name="l00299"></a>00299                         <span class="keywordflow">return</span> <a class="code" href="class_hierarchy_filter.html#af381904eec6b298037622ae5c920f5e" title="Contains filters for hierarchy.">hierarchy_</a>.<a class="code" href="struct_utils_1_1_hierarchy_options.html#ad9e83a2b933648ba19a7e46ab793e39" title="If true then ip objects should be included in search.">ip_</a>;
<a name="l00300"></a>00300 
<a name="l00301"></a>00301                 <span class="keywordflow">default</span>:
<a name="l00302"></a>00302                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00303"></a>00303         }
<a name="l00304"></a>00304 }
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Nov 30 12:12:41 2011 for Kactus2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
